/**
 * t4utils - This is a utility class that can be used in conjuntion with content types in the Terminal 4 CMS.
 * @version v1.0.2
 * @link git+https://github.com/FPBSchoolOfNursing/T4Utils.git
 * @author Ben Margevicius
 * Copyright 2016. MIT licensed.
 * Built: Thu Apr 14 2016 14:15:56 GMT-0400 (Eastern Daylight Time).
 */
importClass(com.terminalfour.publish.PathBuilder),importPackage(com.terminalfour.media),importPackage(com.terminalfour.media.utils);var T4Utils=function(t){return t.version="v1.0.2_2016.14.04",t.console=function(t,e){"string"==typeof e&&document.write("<script>console."+t+"('"+e+"');</script>\n")},t.console.log=function(t){"string"==typeof t&&document.write("<script>console.log('"+t+"');</script>\n")},t.console.warn=function(t){"string"==typeof t&&document.write("<script>console.warn('"+t+"');</script>\n")},t.console.error=function(t){"string"==typeof t&&document.write("<script>console.error('"+t+"');</script>\n")},t.write=function(t){document.write("<p>"+t+"</p>\n")},t.toString=function(t){return new java.lang.String(t)},String.prototype.toJavaString=function(){return new java.lang.String(this)},t.escapeHtml=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;")},t}(T4Utils||{});T4Utils.siteManager=T4Utils.siteManager||{},T4Utils.siteManager.version=com.terminalfour.sitemanager.SiteManagerVersion.version,T4Utils.siteManager.buildDetails=com.terminalfour.sitemanager.SiteManagerVersion.buildDetails,T4Utils.siteManager.javaVersion=java.lang.System.getProperty("java.version"),T4Utils.brokerUtils=T4Utils.brokerUtils||{},T4Utils.brokerUtils.processT4Tag=function(t){var e=content||null;return com.terminalfour.publish.utils.BrokerUtils.processT4Tags(dbStatement,publishCache,section,e,language,isPreview,t)},T4Utils.elementInfo=T4Utils.elementInfo||{},T4Utils.elementInfo.getElements=function(){var t=content||null;return null===t?null:void t.getElements()},T4Utils.elementInfo.getElementValue=function(t){var e=content||null;if(null!==e){var n=e.get(t);if("function"==typeof n.publish)return n.publish()}return null},T4Utils.elementInfo.getElementName=function(t){var e=content||null;if(null!==e){var n=e.get(t);if("function"==typeof n.getName)return e.get(t).getName()}return null},T4Utils.elementInfo.getElementID=function(t){var e=content||null;if(null!==e){var n=e.get(t);if("function"==typeof n.getID)return n.getID()}return null},T4Utils.getSectionInfo=T4Utils.getSectionInfo||{},T4Utils.getSectionInfo.getPublishLink=function(){return this.publishLink},T4Utils.getSectionInfo.setPublishLink=function(t){this.publishLink=PathBuilder.getLink(dbStatement,t,publishCache,language,isPreview)},T4Utils.getSectionInfo.sectionTitle=function(t){return this.setPublishLink(t),this.publishLink.getText()},T4Utils.getSectionInfo.sectionLink=function(t){return this.setPublishLink(t),this.publishLink.getLink()},T4Utils.getSectionInfo.anchorLink=function(t){this.setPublishLink(t);var e=this.publishLink.getLink(),n=this.publishLink.getText(),i='<a href="'+e+'">'+n+"</a>";return i},T4Utils.getSectionInfo.getDirectory=function(t){return PathBuilder.getDirectory(t,publishCache,language).toString()},T4Utils.getSectionInfo.getChildren=function(t,e){return void 0===e&&(e=!1),t.getChildren(publishCache.channel,language,e)},T4Utils.getSectionInfo.getRootPath=function(t){return this.getPathUntilLevel(0,t)},T4Utils.getSectionInfo.getPathUntilLevel=function(t,e,n){n=n||[],n.push(e);var i=e.getLevel(publishCache.channel);if(i>t){var r=e.getParent();return this.getPathUntilLevel(t,r,n)}return n},T4Utils.getSectionInfo.getPathBySteps=function(t,e,n){if(n=n||[],n.push(e),n.length<t){var i=e.getParent();return null===i?n:this.getPathBySteps(t,i,n)}return n},T4Utils.getSectionInfo.getLevel=function(t){return t.getLevel(publishCache.channel)},T4Utils.media=T4Utils.media||{},T4Utils.media.getImageVariantsIds=function(t){var e=content.get(t).getID(),n=MediaManager.getManager().getMediaVariants(dbStatement.getConnection(),e,language);return n},T4Utils.media.getImageDimensions=function(t){var e={width:0,height:0};return e.width=MediaUtils.getImageDimensions(t)[0],e.height=MediaUtils.getImageDimensions(t)[1],e},T4Utils.media.getMediaObject=function(t){return MediaManager.getManager().get(dbStatement.getConnection(),t,language)},T4Utils.media.getImageTag=function(t,e,n,i){var r="";try{var s="<t4 />";T4Utils.write("Processing t4Tag: "+s),T4Utils.write("t4src is type: "+typeof s),T4Utils.write("t4src.length: "+s.length),T4Utils.write("t4 version: "+T4Utils.siteManager.version),T4Utils.write("t4 buildDetails: "+T4Utils.siteManager.buildDetails),T4Utils.write("t4 javaVersion: "+T4Utils.siteManager.javaVersion)}catch(a){document.write("error processing utils.media.getImageTag()"),document.write(a.message)}return r},T4Utils.security=T4Utils.security||{},T4Utils.security.toSHA256=function(t){importPackage(java.security);var e;try{var n=MessageDigest.getInstance("SHA-256"),i=new java.lang.String(t).getBytes("UTF-8");n.update(i);for(var r=n.digest(),s=new java.lang.StringBuffer,a=0;a<r.length;a++)s.append(java.lang.Integer.toString((255&r[a])+256,16).substring(1));e=s.toString()}catch(l){document.write(l)}return e};